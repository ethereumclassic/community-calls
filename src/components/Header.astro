---
import { Icon } from 'astro-icon/components';
import { siteConfig } from '../lib/config';
---

<header class="sticky top-0 z-50 backdrop-blur-xl bg-void/80 border-b border-etc-green/10" transition:persist>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <nav class="flex items-center justify-between h-16">
      <!-- Logo & Title -->
      <a href="/" class="flex items-center gap-3 group flex-shrink-0">
        <div class="relative">
          <img
            src={siteConfig.assets.logo}
            alt="ETC"
            class="h-8 w-8 sm:h-9 sm:w-9 transition-transform duration-300 group-hover:scale-110"
          />
          <div class="absolute inset-0 bg-etc-green/20 rounded-full blur-md opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
        </div>
        <div class="flex flex-col">
          <span class="text-sm font-mono font-semibold tracking-wide text-etc-green">Ethereum Classic</span>
          <span class="text-[10px] sm:text-xs font-mono text-gray-400 -mt-0.5">Community Calls</span>
        </div>
      </a>

      <!-- Desktop Navigation -->
      <div class="hidden md:flex items-center gap-1">
        <a
          href="/"
          class="nav-link"
        >
          Archive
        </a>
        <a
          href={siteConfig.social.discord}
          target="_blank"
          rel="noopener noreferrer"
          class="nav-link flex items-center gap-2"
        >
          <Icon name="simple-icons:discord" class="icon-sm" />
          Discord
        </a>
        <a
          href={siteConfig.social.youtube}
          target="_blank"
          rel="noopener noreferrer"
          class="nav-link flex items-center gap-2"
        >
          <Icon name="simple-icons:youtube" class="icon-sm" />
          YouTube
        </a>
        <button
          type="button"
          onclick="document.getElementById('subscribe-modal-global').showModal()"
          class="nav-link flex items-center gap-2 cursor-pointer"
        >
          <Icon name="lucide:calendar" class="icon-sm" />
          Subscribe
        </button>
      </div>

      <!-- Mobile menu button -->
      <button
        type="button"
        class="md:hidden p-2 text-gray-400 hover:text-etc-green transition-colors"
        aria-label="Toggle menu"
        id="mobile-menu-button"
      >
        <Icon name="lucide:menu" class="icon-lg" id="menu-icon" />
        <Icon name="lucide:x" class="icon-lg hidden" id="close-icon" />
      </button>
    </nav>

    <!-- Mobile Navigation -->
    <div class="hidden md:hidden pb-4" id="mobile-menu">
      <div class="flex flex-col gap-1 pt-2 border-t border-etc-green/10">
        <a
          href="/"
          class="nav-link-mobile"
        >
          Archive
        </a>
        <a
          href={siteConfig.social.discord}
          target="_blank"
          rel="noopener noreferrer"
          class="nav-link-mobile flex items-center gap-3"
        >
          <Icon name="simple-icons:discord" class="icon-md" />
          Discord
        </a>
        <a
          href={siteConfig.social.youtube}
          target="_blank"
          rel="noopener noreferrer"
          class="nav-link-mobile flex items-center gap-3"
        >
          <Icon name="simple-icons:youtube" class="icon-md" />
          YouTube
        </a>
        <button
          type="button"
          onclick="document.getElementById('subscribe-modal-global').showModal()"
          class="nav-link-mobile flex items-center gap-3 w-full text-left cursor-pointer"
        >
          <Icon name="lucide:calendar" class="icon-md" />
          Subscribe
        </button>
      </div>
    </div>
  </div>
</header>

<script>
  const menuButton = document.getElementById('mobile-menu-button');
  const mobileMenu = document.getElementById('mobile-menu');
  const menuIcon = document.getElementById('menu-icon');
  const closeIcon = document.getElementById('close-icon');

  if (menuButton && mobileMenu && menuIcon && closeIcon) {
    menuButton.addEventListener('click', () => {
      const isOpen = !mobileMenu.classList.contains('hidden');
      mobileMenu.classList.toggle('hidden');
      menuIcon.classList.toggle('hidden');
      closeIcon.classList.toggle('hidden');
    });
  }
</script>
