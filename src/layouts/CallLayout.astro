---
import type { Call } from "../lib/types";
import PageLayout from "./PageLayout.astro";
import AnimatedContainer from "../components/AnimatedContainer.astro";
import CallNavigation from "../components/CallNavigation.astro";
import CallHeader from "../components/CallHeader.astro";
import YouTubeEmbed from "../components/YouTubeEmbed.astro";
// import HostList from "../components/HostList.astro";

interface Props {
  call: Call;
  prevCall?: Call | null;
  nextCall?: Call | null;
}

const { call, prevCall, nextCall } = Astro.props;

const callNumber = call.data.callNumber!;
const youtubeId = call.data.youtubeId;

const baseTitle = `ETC Community Call ${callNumber}`;
const title = call.data.description
  ? `${baseTitle} - ${call.data.description}`
  : baseTitle;
---

<PageLayout title={title} description={call.data.description} maxWidth="narrow">
  <AnimatedContainer as="article" delay={100}>
    <CallNavigation prevCall={prevCall} nextCall={nextCall} />

    <CallHeader call={call} />

    {
      youtubeId && (
        <YouTubeEmbed
          youtubeId={youtubeId}
          date={call.data.date}
          callNumber={callNumber}
          title={title}
        />
      )
    }

    <!-- Hosts - temporarily hidden
    {call.data.hosts && call.data.hosts.length > 0 && (
      <HostList hosts={call.data.hosts} />
    )}
    -->

    <!-- Main Content -->
    <AnimatedContainer
      as="section"
      delay={400}
      class="prose prose-lg prose-invert max-w-none"
    >
      <slot />
    </AnimatedContainer>
  </AnimatedContainer>
</PageLayout>
